<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zyra NFT Marketplace</title>
    <style>
        /* Enhanced styling */
        body {
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0047ab 0%, #001f4d 100%);
            color: #d0e8ff;
            margin: 0;
            min-height: 100vh;
        }

        header {
            background: rgba(0, 31, 77, 0.9);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        nav {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        nav a, .nav-btn {
            color: #d0e8ff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        nav a:hover {
            background: rgba(51, 133, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-btn {
            background: linear-gradient(90deg, #3385ff, #7eff7e);
            color: #001f4d;
            border: none;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(51, 133, 255, 0.3);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(51, 133, 255, 0.4);
        }

        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .nft-card {
            background: rgba(30, 60, 130, 0.7);
            border-radius: 15px;
            padding: 1rem;
            transition: all 0.3s;
            cursor: pointer;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(51, 133, 255, 0.2);
        }

        .nft-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .nft-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .nft-card:hover .nft-image {
            transform: scale(1.05);
        }

        .nft-info {
            padding: 1.5rem 0;
        }

        .nft-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 71, 171, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(51, 133, 255, 0.3);
        }

        .buy-btn {
            background: linear-gradient(90deg, #3385ff, #7eff7e);
            color: #001f4d;
            border: none;
            border-radius: 8px;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .buy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(51, 133, 255, 0.4);
        }

        .filters {
            padding: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .filter-btn {
            background: rgba(30, 60, 130, 0.7);
            border: 1px solid #3385ff;
            color: #d0e8ff;
            padding: 0.8rem 1.5rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: rgba(51, 133, 255, 0.3);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(90deg, #3385ff, #7eff7e);
            color: #001f4d;
            border: none;
            font-weight: 600;
        }

        .nft-stats {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #a0c8ff;
        }

        .loading-skeleton {
            animation: skeleton-loading 1s infinite alternate;
        }

        @keyframes skeleton-loading {
            from { opacity: 0.6; }
            to { opacity: 1; }
        }

        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(0, 31, 77, 0.9);
            margin-top: 4rem;
        }

        .notification {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 2rem;
            border-radius: 8px;
            background: rgba(51, 133, 255, 0.9);
            backdrop-filter: blur(5px);
            transform: translateX(200%);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .create-nft-btn {
            background: linear-gradient(90deg, #7eff7e, #3385ff);
            margin-right: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 31, 77, 0.9);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background: rgba(30, 60, 130, 0.9);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            max-width: 600px;
            border: 1px solid rgba(51, 133, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .modal-close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #d0e8ff;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #ff5151;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #d0e8ff;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border-radius: 8px;
            border: 1px solid rgba(51, 133, 255, 0.3);
            background: rgba(0, 31, 77, 0.5);
            color: #d0e8ff;
            font-size: 1rem;
        }

        .form-group input[type="file"] {
            background: none;
            border: none;
            padding: 0;
        }

        .submit-btn {
            background: linear-gradient(90deg, #3385ff, #7eff7e);
            color: #001f4d;
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(51, 133, 255, 0.4);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">ZYRA</div>
        <nav>
            <a href="index.html">Dashboard</a>
            <a href="explorer.html">Explorer</a>
            <a href="validators.html">Validators</a>
            <a href="governance.html">Governance</a>
            <a href="launchpad.html">Launchpad</a>
            <a href="nfts.html">NFTs</a>
            <a href="docs.html">Docs</a>
            <button class="nav-btn create-nft-btn" onclick="showCreateNFTModal()">Create NFT</button>
            <button class="nav-btn" onclick="window.location.href='exchange.html'">Exchange</button>
        </nav>
    </header>

    <main>
        <h1>NFT Marketplace</h1>
        
        <div class="filters">
            <button class="filter-btn active">All</button>
            <button class="filter-btn">Art</button>
            <button class="filter-btn">Collectibles</button>
            <button class="filter-btn">Gaming</button>
            <button class="filter-btn">Music</button>
            <button class="filter-btn">Virtual Worlds</button>
            <button class="filter-btn">Trading Cards</button>
            <button class="filter-btn">Sports</button>
        </div>

        <div class="nft-grid" id="nftGrid">
            <!-- Loading skeletons -->
        </div>
    </main>

    <div class="notification" id="notification"></div>

    <footer>
        Â© 2025 Zyra Blockchain. All rights reserved.
    </footer>

    <div id="createNFTModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeCreateNFTModal()">&times;</span>
            <h2>Create New NFT</h2>
            <form id="createNFTForm" onsubmit="handleCreateNFT(event)">
                <div class="form-group">
                    <label for="nftName">NFT Name</label>
                    <input type="text" id="nftName" required>
                </div>
                <div class="form-group">
                    <label for="nftDescription">Description</label>
                    <textarea id="nftDescription" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="nftImage">Upload Image</label>
                    <input type="file" id="nftImage" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="nftPrice">Price (ZYRA)</label>
                    <input type="number" id="nftPrice" step="0.000001" required>
                </div>
                <div class="form-group">
                    <label for="nftCategory">Category</label>
                    <select id="nftCategory" required>
                        <option value="Art">Art</option>
                        <option value="Collectibles">Collectibles</option>
                        <option value="Gaming">Gaming</option>
                        <option value="Music">Music</option>
                        <option value="Virtual Worlds">Virtual Worlds</option>
                        <option value="Trading Cards">Trading Cards</option>
                        <option value="Sports">Sports</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">Create NFT</button>
            </form>
        </div>
    </div>

    <script>
        // Enhanced JavaScript with WebSocket connection and advanced features
        let ws;
        let reconnectAttempts = 0;
        const maxReconnectAttempts = 5;

        function connectWebSocket() {
            ws = new WebSocket('ws://localhost:8080');
            
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'nftUpdate') {
                    updateNFTs(data.nfts);
                }
            };

            ws.onclose = () => {
                if (reconnectAttempts < maxReconnectAttempts) {
                    setTimeout(() => {
                        reconnectAttempts++;
                        connectWebSocket();
                    }, 2000 * Math.pow(2, reconnectAttempts));
                }
            };
        }

        connectWebSocket();

        // Show loading skeletons
        function showLoadingSkeletons() {
            const grid = document.getElementById('nftGrid');
            grid.innerHTML = Array(8).fill(0).map(() => `
                <div class="nft-card loading-skeleton">
                    <div class="nft-image" style="background: rgba(51, 133, 255, 0.1)"></div>
                    <div class="nft-info">
                        <div style="height: 24px; background: rgba(51, 133, 255, 0.1); margin: 10px 0;"></div>
                        <div style="height: 16px; background: rgba(51, 133, 255, 0.1); margin: 10px 0;"></div>
                        <div class="nft-price">
                            <div style="height: 20px; width: 100px; background: rgba(51, 133, 255, 0.1);"></div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        showLoadingSkeletons();

        function updateNFTs(nfts) {
            const grid = document.getElementById('nftGrid');
            grid.innerHTML = nfts.map(nft => `
                <div class="nft-card">
                    <img src="${nft.image}" alt="${nft.name}" class="nft-image">
                    <div class="nft-info">
                        <h3>${nft.name}</h3>
                        <p>${nft.description}</p>
                        <div class="nft-stats">
                            <span>Views: ${nft.views}</span>
                            <span>Likes: ${nft.likes}</span>
                            <span>Created: ${new Date(nft.created).toLocaleDateString()}</span>
                        </div>
                        <div class="nft-price">
                            <span>${nft.price} ZYRA</span>
                            <button class="buy-btn" onclick="buyNFT('${nft.id}', '${nft.price}')">Buy Now</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function buyNFT(id, price) {
            if (!window.ethereum) {
                showNotification('Please install MetaMask to purchase NFTs', 'error');
                return;
            }

            try {
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                showNotification('Processing purchase...', 'info');

                // Simulated transaction delay
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Add purchase logic here
                showNotification('NFT purchased successfully!', 'success');
            } catch (err) {
                console.error('Purchase failed:', err);
                showNotification('Purchase failed: ' + err.message, 'error');
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'error' ? 'rgba(255, 51, 51, 0.9)' : 
                                         type === 'success' ? 'rgba(51, 255, 51, 0.9)' : 
                                         'rgba(51, 133, 255, 0.9)';
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        // Enhanced filter functionality with animation
        let currentFilter = 'All';
        const filters = document.querySelectorAll('.filter-btn');

        filters.forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.textContent === currentFilter) return;

                document.querySelector('.filter-btn.active').classList.remove('active');
                btn.classList.add('active');
                currentFilter = btn.textContent;

                // Show loading state
                showLoadingSkeletons();

                // Simulate filter delay
                setTimeout(() => {
                    // Add filter logic here
                    // For now, just show the loading state
                    showLoadingSkeletons();
                }, 500);
            });
        });

        // Modal functionality
        function showCreateNFTModal() {
            document.getElementById('createNFTModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeCreateNFTModal() {
            document.getElementById('createNFTModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        async function handleCreateNFT(event) {
            event.preventDefault();

            if (!window.ethereum) {
                showNotification('Please install MetaMask to create NFTs', 'error');
                return;
            }

            try {
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                showNotification('Creating your NFT...', 'info');

                const formData = new FormData();
                formData.append('name', document.getElementById('nftName').value);
                formData.append('description', document.getElementById('nftDescription').value);
                formData.append('image', document.getElementById('nftImage').files[0]);
                formData.append('price', document.getElementById('nftPrice').value);
                formData.append('category', document.getElementById('nftCategory').value);
                formData.append('creator', accounts[0]);

                // Simulated upload delay
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Add NFT creation logic here
                // This would typically involve IPFS upload and smart contract interaction

                showNotification('NFT created successfully!', 'success');
                closeCreateNFTModal();
                document.getElementById('createNFTForm').reset();
                
                // Refresh the NFT grid
                showLoadingSkeletons();
            } catch (err) {
                console.error('NFT creation failed:', err);
                showNotification('NFT creation failed: ' + err.message, 'error');
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target == document.getElementById('createNFTModal')) {
                closeCreateNFTModal();
            }
        }
    </script>
</body>
</html>

