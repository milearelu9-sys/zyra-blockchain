<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zyra Blockchain Dashboard</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0047ab 0%, #001f4d 100%);
      color: #d0e8ff;
      margin: 0;
      min-height: 100vh;
    }
    header {
      padding: 1rem 3rem;
      background: rgba(0, 71, 171, 0.9);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      font-weight: 700;
      font-size: 1.6rem;
      color: #a8d0ff;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }
    nav {
      display: flex;
      gap: 2rem;
    }
    nav a {
      font-weight: 600;
      font-size: 1rem;
      color: #a8d0ff;
      text-decoration: none;
      padding: 0.3rem 0.5rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    nav a:hover {
      background-color: #3385ffcc;
      color: #001f4d;
    }
    .wallet-container {
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    button {
      background: #1e3c82;
      color: #a8d0ff;
      border: 1.5px solid #3385ff;
      border-radius: 8px;
      padding: 0.45rem 1.1rem;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease;
      min-width: 120px;
    }
    button:hover {
      background-color: #3385ff;
      color: #001f4d;
    }
    button:disabled {
      background-color: #555f7a;
      color: #9cb4ff99;
      border-color: #666f8c;
      cursor: not-allowed;
    }
    main {
      flex-grow: 1;
      padding: 2rem 3rem;
      max-width: 1200px;
      margin: 0 auto 3rem auto;
    }
    main h1 {
      color: #a8d0ff;
      font-size: 3rem;
      margin-bottom: 2rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-align: center;
    }
    .overall-stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 3rem;
    }
    .stat-card {
      background: rgba(50, 100, 255, 0.15);
      border-radius: 15px;
      padding: 1.8rem 2rem;
      box-shadow: inset 0 0 15px #3399ff88, 0 6px 12px rgba(51, 153, 255, 0.4);
      color: #cce4ff;
      text-align: center;
      width: 180px;
      cursor: default;
      transition: transform 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-6px);
      box-shadow: inset 0 0 20px #66b2ffcc, 0 10px 25px rgba(102, 178, 255, 0.7);
    }
    .stat-card h2 {
      margin: 0 0 0.3rem 0;
      font-weight: 700;
      font-size: 1.4rem;
      color: #66b2ff;
      letter-spacing: 0.05em;
    }
    .stat-card .value {
      font-weight: 700;
      font-size: 2.4rem;
      color: #e0f0ff;
    }
    .stat-card .description {
      margin-top: 0.5rem;
      font-weight: 400;
      font-size: 0.95rem;
      color: #a0c4ffbb;
    }
    .chart-container {
      margin: 2rem auto;
      max-width: 700px;
      background: rgba(30, 60, 130, 0.7);
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 0 12px #3399ff99;
      color: #d0e8ff;
    }
    .nodes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.6rem;
      margin-bottom: 3rem;
    }
    .node-card {
      background: rgba(30, 60, 130, 0.7);
      border-radius: 15px;
      padding: 1.6rem 1.8rem;
      box-shadow: 0 0 12px #3399ff99;
      color: #d0e8ff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: box-shadow 0.3s ease;
      cursor: default;
    }
    .node-card:hover {
      box-shadow: 0 0 25px #66b2ffcc;
    }
    .node-card h3 {
      margin: 0 0 0.5rem 0;
      font-weight: 700;
      font-size: 1.3rem;
      color: #66b2ff;
    }
    .node-card .tps {
      font-weight: 700;
      font-size: 2rem;
      color: #cce4ff;
    }
    .node-card .status {
      margin-top: 0.6rem;
      font-weight: 600;
      font-size: 0.95rem;
      color: #a0c4ffbb;
    }
    .status.online {
      color: #7eff7e;
    }
    .status.offline {
      color: #ff7e7e;
    }
    .tx-dashboard {
      background: rgba(30, 60, 130, 0.7);
      border-radius: 15px;
      padding: 1.6rem 2rem;
      box-shadow: 0 0 20px #3399ffbb;
      color: #d0e8ff;
      max-height: 360px;
      overflow-y: auto;
    }
    .tx-dashboard h2 {
      color: #66b2ff;
      margin-bottom: 1rem;
      font-weight: 700;
      letter-spacing: 0.05em;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 0.65rem 0.8rem;
      text-align: left;
      font-size: 0.95rem;
      border-bottom: 1px solid #3385ff44;
      white-space: nowrap;
    }
    th {
      color: #a8d0ff;
      font-weight: 700;
    }
    td a {
      color: #99c9ff;
    }
    td.status-confirmed {
      color: #7eff7e;
      font-weight: 600;
    }
    td.status-pending {
      color: #ffb366;
      font-weight: 600;
    }
    .alerts {
      background: rgba(255, 100, 100, 0.15);
      border-radius: 10px;
      padding: 1rem 1.5rem;
      margin: 2rem auto;
      max-width: 700px;
      color: #ff7e7e;
      font-weight: 600;
      box-shadow: 0 2px 8px #ff7e7e44;
    }
    .alerts ul {
      margin: 0.5rem 0 0 1.2rem;
      color: #ffd0d0;
      font-weight: 400;
    }
    .quick-links {
      margin: 2rem auto;
      max-width: 700px;
      background: rgba(50, 100, 255, 0.10);
      border-radius: 10px;
      padding: 1rem 1.5rem;
      color: #a8d0ff;
      font-size: 1.1rem;
      box-shadow: 0 2px 8px #3385ff44;
    }
    .quick-links a {
      color: #e0f0ff;
      margin-right: 1.5rem;
      text-decoration: underline;
      font-weight: 600;
    }
    .quick-links a:hover {
      color: #66b2ff;
    }
    footer {
      text-align: center;
      padding: 1rem 0;
      font-weight: 500;
      font-size: 0.9rem;
      color: #a0c4ffbb;
      background: rgba(0, 31, 77, 0.8);
      letter-spacing: 0.08em;
    }
    @media (max-width: 650px) {
      header {
        flex-direction: column;
        gap: 1rem;
        padding: 1rem 1.5rem;
      }
      main {
        padding: 2rem 1rem;
      }
      .overall-stats {
        flex-direction: column;
        align-items: center;
      }
      table, th, td {
        font-size: 0.85rem;
      }
      .chart-container, .alerts, .quick-links {
        padding: 1rem;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="logo">
      <img src="zyra.svg" alt="ZYRA Logo" style="height:38px;width:38px;vertical-align:middle;margin-right:0.7rem;" />
      ZYRA
    </div>
    <nav>
      <a href="index.html">Dashboard</a>
      <a href="explorer.html">Explorer</a>
      <a href="validators.html">Validators</a>
      <a href="governance.html">Governance</a>
      <a href="launchpad.html">Launchpad</a>
      <a href="nfts.html">NFTs</a>
      <a href="docs.html">Docs</a>
    </nav>
    <div class="wallet-container">
      <button id="connectWalletBtn">Connect Wallet</button>
      <button id="donateBtn" disabled>Donate 0.001 ETH</button>
      <div id="walletDetails" style="margin-left:1rem; color:#a8d0ff; font-size:1.05rem;">
        <span>Wallet: <span id="walletAddress">Not connected</span></span><br>
        <span>Balance: <span id="walletBalance">-- ZYRA</span></span>
      </div>
    </div>
  </header>
  <main>
    <h1>Zyra Blockchain Dashboard</h1>
    <div class="overall-stats">
      <div class="stat-card">
        <h2>Total TPS</h2>
        <div class="value" id="totalTps">--</div>
        <div class="description">Transactions per second</div>
      </div>
      <div class="stat-card">
        <h2>Active Nodes</h2>
        <div class="value" id="activeNodes">--</div>
        <div class="description">Online Validator Nodes</div>
      </div>
      <div class="stat-card">
        <h2>Average Latency</h2>
        <div class="value" id="avgLatency">-- ms</div>
        <div class="description">Network latency</div>
      </div>
      <div class="stat-card">
        <h2>Finality Time</h2>
        <div class="value" id="finalityTime">-- s</div>
        <div class="description">Time to finality</div>
      </div>
      <div class="stat-card">
        <h2>Network Health</h2>
        <div class="value" id="networkHealth">--</div>
        <div class="description">Status & reliability</div>
      </div>
    </div>
    <div class="chart-container">
      <canvas id="analyticsChart" height="120"></canvas>
    </div>
    <div class="nodes-grid" id="nodesGrid"></div>
    <!-- Buy Zyra Token section removed -->

    <!-- ChatGPT Section -->
    <div class="chart-container" style="margin-top:2rem;">
      <h2 style="text-align:center;color:#a8d0ff;">ChatGPT Assistant</h2>
      <div id="chatPanel" style="background:#1e293b;border-radius:12px;padding:1rem;max-width:600px;margin:0 auto;">
        <div id="chatMessages" style="min-height:120px;margin-bottom:1rem;"></div>
        <input id="chatInput" type="text" placeholder="Ask anything about Zyra, blockchain, or crypto..." style="width:80%;padding:0.5rem;border-radius:6px;border:none;" />
        <button id="chatSendBtn" style="background:#3385ff;color:#fff;border:none;border-radius:8px;padding:0.5rem 1.2rem;font-weight:600;cursor:pointer;margin-left:0.5rem;">Send</button>
      </div>
    </div>
    <div class="chart-container" style="margin-top:2rem;">
      <h2 style="text-align:center;color:#a8d0ff;">AI Trading Assistant</h2>
      <div id="aiTradingPanel"></div>
    </div>
    <div class="chart-container" style="margin-top:2rem;">
      <h2 style="text-align:center;color:#a8d0ff;">Live NFT Gallery</h2>
      <div id="nftGallery" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1.2rem;"></div>
    </div>
    <div class="chart-container" style="margin-top:2rem;">
      <h2 style="text-align:center;color:#a8d0ff;">Governance Voting</h2>
      <div id="governanceVotingPanel"></div>
    </div>
    <div class="alerts" id="alerts"></div>
  </main>
  <footer>
    Â© 2025 Zyra Blockchain. All rights reserved.
  </footer>
  <script>
    // Unlimited Validator Nodes, Real-Time Join/Leave
    let validatorNodes = [
      { id: 1, name: 'Validator-1', tps: 21000, online: true, latency: 85, value: 22000 },
      { id: 2, name: 'Validator-2', tps: 22000, online: true, latency: 120, value: 23000 },
      { id: 3, name: 'Validator-3', tps: 23000, online: true, latency: 100, value: 21000 },
      { id: 4, name: 'Validator-4', tps: 25000, online: true, latency: 95, value: 25500 },
      { id: 5, name: 'Validator-5', tps: 24000, online: true, latency: 110, value: 24500 },
      { id: 6, name: 'Validator-6', tps: 50000, online: true, latency: 80, value: 50000 }
    ];

    function renderNodes() {
      const grid = document.getElementById('nodesGrid');
      grid.innerHTML = '';
      validatorNodes.forEach(node => {
        const card = document.createElement('div');
        card.className = 'node-card';
        card.innerHTML = `
          <h3>${node.name}</h3>
          <div class="tps">${node.tps.toLocaleString()} TPS</div>
          <div class="status ${node.online ? 'online' : 'offline'}">${node.online ? 'Online' : 'Offline'}</div>
          <div style="margin-top:0.5rem;font-size:0.95rem;">Latency: ${node.latency} ms</div>
          <div style="margin-top:0.5rem;font-size:0.95rem;">Value: ${node.value} ZYRA</div>
        `;
        grid.appendChild(card);
      });
    }

    function addValidatorNode() {
      const id = validatorNodes.length + 1;
      validatorNodes.push({
        id,
        name: `Validator-${id}`,
        tps: Math.floor(Math.random() * 10000) + 20000,
        online: true,
        latency: Math.floor(Math.random() * 50) + 80,
        value: Math.floor(Math.random() * 10000) + 20000
      });
      renderNodes();
      updateOverallStats();
    }

    function removeValidatorNode() {
      if (validatorNodes.length > 1) {
        validatorNodes.pop();
        renderNodes();
        updateOverallStats();
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderNodes();
      updateOverallStats();
    });

    window.addValidatorNode = undefined;
    window.removeValidatorNode = undefined;

    function updateOverallStats() {
      document.getElementById('activeNodes').textContent = validatorNodes.length;
    }

    // Advanced Analytics Live Section
    const analyticsCtx = document.getElementById('analyticsChart').getContext('2d');
    const analyticsChart = new Chart(analyticsCtx, {
      type: 'bar',
      data: {
        labels: ['TPS', 'Nodes', 'Latency', 'Finality'],
        datasets: [{
          label: 'Live Network Stats',
          data: [0, 0, 0, 0],
          backgroundColor: [
            '#3385ff', '#7eff7e', '#ffb366', '#a8d0ff'
          ]
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false } },
        scales: { y: { beginAtZero: true } }
      }
    });

    function updateAnalyticsLive() {
      const tps = Math.floor(Math.random() * 1000) + 50000;
      const nodes = validatorNodes.length;
      const latency = Math.floor(Math.random() * 40) + 80;
      const finality = (Math.random() * 2 + 1).toFixed(2);

      analyticsChart.data.datasets[0].data = [tps, nodes, latency, finality];
      analyticsChart.update();

      document.getElementById('totalTps').textContent = tps.toLocaleString();
      document.getElementById('activeNodes').textContent = nodes;
      document.getElementById('avgLatency').textContent = latency + " ms";
      document.getElementById('finalityTime').textContent = finality + " s";
      document.getElementById('networkHealth').textContent = (tps > 50000 && latency < 120 && nodes > 5) ? "Excellent" : "Good";
    }

    setInterval(updateAnalyticsLive, 3000);
    updateAnalyticsLive();

    // ChatGPT Assistant (real answers using OpenAI API)
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const chatSendBtn = document.getElementById('chatSendBtn');

    function appendChatMessage(sender, text) {
      const msgDiv = document.createElement('div');
      msgDiv.style = "margin-bottom:0.7rem;";
      msgDiv.innerHTML = `<strong style="color:${sender==='You'?'#7eff7e':'#3385ff'}">${sender}:</strong> <span>${text}</span>`;
      chatMessages.appendChild(msgDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function getChatGPTAnswer(question) {
      // Replace YOUR_OPENAI_API_KEY with your actual OpenAI API key
      const apiKey = "_https://chatgpt.com";
      const endpoint = "https://chatgpt.com";
      const payload = {
        model: "gpt-3.5-turbo",
        messages: [
          { role: "system", content: "You are an expert on blockchain and cryptocurrency. Answer questions clearly and concisely." },
          { role: "user", content: question }
        ],
        max_tokens: 256,
        temperature: 0.7
      };
      try {
        const response = await fetch(endpoint, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify(payload)
        });
        const data = await response.json();
        if (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) {
          return data.choices[0].message.content;
        } else if (data.error && data.error.message) {
          return "Error: " + data.error.message;
        } else {
          return "Sorry, I couldn't get an answer from ChatGPT.";
        }
      } catch (err) {
        return "Error connecting to ChatGPT API: " + err.message;
      }
    }

    chatSendBtn.onclick = async function() {
      const question = chatInput.value.trim();
      if (!question) return;
      appendChatMessage('You', question);
      chatInput.value = '';
      appendChatMessage('ChatGPT', 'Typing...');
      const answer = await getChatGPTAnswer(question);
      chatMessages.lastChild.innerHTML = `<strong style="color:#3385ff">ChatGPT:</strong> <span>${answer}</span>`;
    };

    chatInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') chatSendBtn.click();
    });

    // AI Trading Assistant
    async function loadAITradingSignals() {
      const signals = [
        { time: "15:00", signal: "BUY", confidence: "92%" },
        { time: "14:00", signal: "HOLD", confidence: "78%" },
        { time: "13:00", signal: "SELL", confidence: "88%" }
      ];
      let html = "<table style='width:100%;'><tr><th>Time</th><th>Signal</th><th>Confidence</th></tr>";
      signals.forEach(s => {
        html += `<tr>
          <td>${s.time}</td>
          <td style="font-weight:700;color:${s.signal==='BUY'?'#7eff7e':s.signal==='SELL'?'#ff7e7e':'#ffb366'}">${s.signal}</td>
          <td>${s.confidence}</td>
        </tr>`;
      });
      html += "</table>";
      document.getElementById('aiTradingPanel').innerHTML = html;
    }
    loadAITradingSignals();

    // Live NFT Gallery
    function renderNFTGallery() {
      const gallery = document.getElementById('nftGallery');
      gallery.innerHTML = '';
      const nfts = [
        {
          name: "Zyra Genesis",
          desc: "The first NFT minted on Zyra.",
          img: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80",
          owner: "0xAb12...4Ef8"
        },
        {
          name: "Validator Badge",
          desc: "Awarded to top performing validators.",
          img: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80",
          owner: "0xCd34...1A7B"
        }
      ];
      nfts.forEach(nft => {
        const card = document.createElement('div');
        card.style = "background:#1e293b;border-radius:12px;padding:1rem;text-align:center;color:#d0e8ff;box-shadow:0 2px 8px #3385ff44;";
        card.innerHTML = `
          <img src="${nft.img}" alt="${nft.name}" style="width:100%;height:120px;object-fit:cover;border-radius:8px;margin-bottom:0.7rem;">
          <div style="font-weight:700;">${nft.name}</div>
          <div style="font-size:0.95rem;">${nft.desc}</div>
          <div style="font-size:0.85rem;color:#66b2ff;margin-top:0.5rem;">Owner: ${nft.owner}</div>
        `;
        gallery.appendChild(card);
      });
    }
    renderNFTGallery();

    // Governance Voting
    function renderGovernanceVoting() {
      const panel = document.getElementById('governanceVotingPanel');
      panel.innerHTML = '';
      const proposals = [
        {
          id: 1,
          title: "Increase Block Size",
          desc: "Proposal to increase the block size from 2MB to 4MB for higher throughput.",
          status: "active",
          votesFor: 120,
          votesAgainst: 45
        },
        {
          id: 2,
          title: "Reduce Validator Commission",
          desc: "Proposal to reduce the maximum validator commission from 10% to 7%.",
          status: "closed",
          votesFor: 210,
          votesAgainst: 30
        }
      ];
      proposals.forEach(p => {
        const div = document.createElement('div');
        div.style = "background:#1e293b;border-radius:10px;padding:1rem;margin-bottom:1rem;color:#d0e8ff;box-shadow:0 2px 8px #3385ff44;";
        div.innerHTML = `
          <div style="font-weight:700;">${p.title}</div>
          <div style="font-size:0.95rem;">${p.desc}</div>
          <div style="margin-top:0.7rem;">
            <button ${p.status !== "active" ? "disabled" : ""}>Vote Yes</button>
            <button ${p.status !== "active" ? "disabled" : ""}>Vote No</button>
          </div>
          <div style="margin-top:0.5rem;font-size:0.85rem;color:#66b2ff;">Yes: ${p.votesFor} | No: ${p.votesAgainst}</div>
          <div class="status ${p.status}" style="margin-top:0.5rem;">${p.status === "active" ? "Active" : "Closed"}</div>
        `;
        panel.appendChild(div);
      });
    }
    renderGovernanceVoting();

    // Security Alerts
    function updateAlerts() {
      const alerts = [
        "No critical vulnerabilities detected.",
        "Last audit: 2025-07-15",
        "All smart contracts verified.",
        "Network health: Excellent"
      ];
      document.getElementById('alerts').innerHTML = `
        <strong>Security Alerts:</strong>
        <ul>${alerts.map(a => `<li>${a}</li>`).join('')}</ul>
      `;
    }
    updateAlerts();

    document.body.setAttribute('lang', 'en');
    document.body.setAttribute('aria-label', 'Zyra Blockchain Dashboard');
  </script>
</body>
</html>